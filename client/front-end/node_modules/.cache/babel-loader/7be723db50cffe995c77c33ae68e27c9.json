{"ast":null,"code":"import _regeneratorRuntime from\"/home/empiric-18/Desktop/Blockchain Lottery/front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/empiric-18/Desktop/Blockchain Lottery/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/empiric-18/Desktop/Blockchain Lottery/front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import\"./App.css\";import{ethers}from\"ethers\";import usdtabi from\"./build/USDT.json\";import blockchainlottery from\"./build/BlockchainLottery.json\";import Navbar from\"./Navbar\";import Main from\"./Main\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),accounts=_useState2[0],setAccounts=_useState2[1];var _useState3=useState(-1),_useState4=_slicedToArray(_useState3,2),ticketNumber=_useState4[0],setTicketNumber=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),pricePool=_useState6[0],setPricePool=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),usdtBalance=_useState8[0],setUsdtBalance=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),lastWinner=_useState10[0],setLastWinner=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),isOn=_useState12[0],setIsOn=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),usdtContract=_useState14[0],setUsdtContract=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),blockchainLotteryContract=_useState16[0],setBlockchainLotteryContract=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),networkErr=_useState18[0],setNetworkErr=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),amount=_useState20[0],setAmount=_useState20[1];var _useState21=useState(null),_useState22=_slicedToArray(_useState21,2),symbol=_useState22[0],setSymbol=_useState22[1];// const [usdtAddress, setUsdtAddress] = useState(null)\n// const USDTAddress = \"0x7FFB3d637014488b63fb9858E279385685AFc1e2\"; //Polygon Mainnet Address For USDT Tokens\n// const USDTAddress = \"0xc1ef3d10d02F27Fe16052Aa463DB2C27a7604660\"; //Polygon Mumbai Address For USDT Tokens\nvar USDTAbi=usdtabi.abi;// const BlockchainLotteryAddress = \"0x903F507A8b2887492aBA0fcEcc654b9981e4Cb58\";\nvar BlockchainLotteryAddress=\"0xC330332351858518Ff61C7d4930780B0d260EDEe\";var BlockchainLotteryAbi=blockchainlottery.abi;var connectWallet=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var chainId,_accounts,tempProvider,tempSigner,tempBlockchainLotteryContract,tempAmount,USDTAddress,tempUSDTContract,tempdecimals,tempSymbol,tempPricePool,tempUSDTBalance,_lastWinner,_isOn,_participants,_participantsTicket,alltickets,i;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!window.ethereum){_context.next=95;break;}_context.next=3;return window.ethereum.request({method:\"net_version\"});case 3:chainId=_context.sent;console.log(chainId);//matic mainnet chain id = 137\n//matic testnet chain id = 80001\n//eslint-disable-next-line\nif(chainId!=80001){setNetworkErr(\"Please change network to polygon\");}else{setNetworkErr(null);}_context.next=8;return window.ethereum.request({method:\"eth_requestAccounts\"});case 8:_accounts=_context.sent;setAccounts(_accounts);tempProvider=new ethers.providers.Web3Provider(window.ethereum);tempSigner=tempProvider.getSigner();tempBlockchainLotteryContract=new ethers.Contract(BlockchainLotteryAddress,BlockchainLotteryAbi,tempSigner);setBlockchainLotteryContract(tempBlockchainLotteryContract);_context.next=16;return tempBlockchainLotteryContract.amount();case 16:tempAmount=_context.sent;setAmount(tempAmount);_context.next=20;return tempBlockchainLotteryContract.USDTAddress();case 20:USDTAddress=_context.sent;// setUsdtAddress(USDTAddress)\ntempUSDTContract=new ethers.Contract(USDTAddress,USDTAbi,tempSigner);setUsdtContract(tempUSDTContract);_context.next=25;return tempUSDTContract.decimals();case 25:tempdecimals=_context.sent;_context.next=28;return tempUSDTContract.symbol();case 28:tempSymbol=_context.sent;setSymbol(tempSymbol);_context.next=32;return tempUSDTContract.balanceOf(BlockchainLotteryAddress);case 32:tempPricePool=_context.sent;console.log(tempPricePool.toNumber()/Math.pow(10,tempdecimals));setPricePool(tempPricePool.toNumber()/Math.pow(10,tempdecimals));_context.next=37;return tempUSDTContract.balanceOf(tempSigner.getAddress());case 37:tempUSDTBalance=_context.sent;console.log(tempUSDTBalance.toNumber()/Math.pow(10,tempdecimals));setUsdtBalance(tempUSDTBalance.toNumber()/Math.pow(10,tempdecimals));console.log(tempBlockchainLotteryContract);_context.next=43;return tempBlockchainLotteryContract.lastWinner();case 43:_lastWinner=_context.sent;setLastWinner(_lastWinner.toNumber());_context.next=47;return tempBlockchainLotteryContract.isOn();case 47:_isOn=_context.sent;console.log(_isOn);setIsOn(_isOn);if(!_isOn){_context.next=54;break;}setTicketNumber(-1);_context.next=93;break;case 54:_context.next=56;return tempBlockchainLotteryContract.getAllParticipants();case 56:_participants=_context.sent;console.log(_participants);_context.t0=tempBlockchainLotteryContract;_context.next=61;return tempSigner.getAddress();case 61:_context.t1=_context.sent;_context.next=64;return _context.t0.addressAndTickets.call(_context.t0,_context.t1);case 64:_participantsTicket=_context.sent;_context.next=67;return tempBlockchainLotteryContract.getAllTickets();case 67:alltickets=_context.sent;console.log(alltickets);// eslint-disable-next-line\n_context.t2=_participants;_context.next=72;return tempSigner.getAddress();case 72:_context.t3=_context.sent;_context.t4=_context.t2.indexOf.call(_context.t2,_context.t3);_context.t5=-1;if(!(_context.t4==_context.t5)){_context.next=80;break;}console.log(\"setting -1 due to no participants\");setTicketNumber(-1);_context.next=93;break;case 80:i=0;case 81:if(!(i<alltickets.length)){_context.next=93;break;}if(!(alltickets[i].toNumber()==_participantsTicket)){_context.next=88;break;}console.log(\"setting number\");setTicketNumber(_participantsTicket.toNumber());return _context.abrupt(\"break\",93);case 88:console.log(\"setting -1 \");setTicketNumber(-1);case 90:i++;_context.next=81;break;case 93:_context.next=96;break;case 95:setNetworkErr(\"Please install Metamask\");case 96:window.ethereum.on(\"accountsChanged\",function(accounts){console.log(accounts);connectWallet();});window.ethereum.on(\"networkChanged\",function(accounts){console.log(accounts);connectWallet();});case 98:case\"end\":return _context.stop();}}},_callee);}));return function connectWallet(){return _ref.apply(this,arguments);};}();var walletConnect=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var WalletConnectProvider,provider,tempProvider,tempSigner,tempBlockchainLotteryContract,tempAmount,USDTAddress,tempUSDTContract,tempdecimals,tempSymbol,tempPricePool,tempUSDTBalance,_lastWinner,_isOn,_participants,_participantsTicket,alltickets,i;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:WalletConnectProvider=window.WalletConnectProvider;console.log(WalletConnectProvider);provider=new WalletConnectProvider.default({rpc:{1:\"https://cloudflare-eth.com/\",// https://ethereumnodes.com/\n137:\"https://polygon-rpc.com/\",// https://docs.polygon.technology/docs/develop/network-details/network/\n80001:\"https://matic-mumbai.chainstacklabs.com/\"// 80001: \"https://polygon-mumbai.g.alchemy.com/v2/bjMe0YCNyiyfqspS91W1JtoPNzoLh19a\"\n// ...\n}// bridge: 'https://bridge.walletconnect.org',\n});console.log(provider.connected);_context2.next=6;return provider.enable();case 6:tempProvider=new ethers.providers.Web3Provider(provider);tempSigner=tempProvider.getSigner();tempBlockchainLotteryContract=new ethers.Contract(BlockchainLotteryAddress,BlockchainLotteryAbi,tempSigner);setBlockchainLotteryContract(tempBlockchainLotteryContract);_context2.next=12;return tempBlockchainLotteryContract.amount();case 12:tempAmount=_context2.sent;setAmount(tempAmount);_context2.next=16;return tempBlockchainLotteryContract.USDTAddress();case 16:USDTAddress=_context2.sent;// setUsdtAddress(USDTAddress)\ntempUSDTContract=new ethers.Contract(USDTAddress,USDTAbi,tempSigner);setUsdtContract(tempUSDTContract);_context2.t0=setAccounts;_context2.next=22;return tempSigner.getAddress();case 22:_context2.t1=_context2.sent;_context2.t2=[_context2.t1];(0,_context2.t0)(_context2.t2);_context2.next=27;return tempUSDTContract.decimals();case 27:tempdecimals=_context2.sent;_context2.next=30;return tempUSDTContract.symbol();case 30:tempSymbol=_context2.sent;setSymbol(tempSymbol);_context2.next=34;return tempUSDTContract.balanceOf(BlockchainLotteryAddress);case 34:tempPricePool=_context2.sent;console.log(tempPricePool.toNumber()/Math.pow(10,tempdecimals));setPricePool(tempPricePool.toNumber()/Math.pow(10,tempdecimals));_context2.next=39;return tempUSDTContract.balanceOf(tempSigner.getAddress());case 39:tempUSDTBalance=_context2.sent;console.log(tempUSDTBalance.toNumber()/Math.pow(10,tempdecimals));setUsdtBalance(tempUSDTBalance.toNumber()/Math.pow(10,tempdecimals));console.log(tempBlockchainLotteryContract);_context2.next=45;return tempBlockchainLotteryContract.lastWinner();case 45:_lastWinner=_context2.sent;setLastWinner(_lastWinner.toNumber());_context2.next=49;return tempBlockchainLotteryContract.isOn();case 49:_isOn=_context2.sent;console.log(_isOn);setIsOn(_isOn);if(!_isOn){_context2.next=56;break;}setTicketNumber(-1);_context2.next=95;break;case 56:_context2.next=58;return tempBlockchainLotteryContract.getAllParticipants();case 58:_participants=_context2.sent;console.log(_participants);_context2.t3=tempBlockchainLotteryContract;_context2.next=63;return tempSigner.getAddress();case 63:_context2.t4=_context2.sent;_context2.next=66;return _context2.t3.addressAndTickets.call(_context2.t3,_context2.t4);case 66:_participantsTicket=_context2.sent;_context2.next=69;return tempBlockchainLotteryContract.getAllTickets();case 69:alltickets=_context2.sent;console.log(alltickets);// eslint-disable-next-line\n_context2.t5=_participants;_context2.next=74;return tempSigner.getAddress();case 74:_context2.t6=_context2.sent;_context2.t7=_context2.t5.indexOf.call(_context2.t5,_context2.t6);_context2.t8=-1;if(!(_context2.t7==_context2.t8)){_context2.next=82;break;}console.log(\"setting -1 due to no participants\");setTicketNumber(-1);_context2.next=95;break;case 82:i=0;case 83:if(!(i<alltickets.length)){_context2.next=95;break;}if(!(alltickets[i].toNumber()==_participantsTicket)){_context2.next=90;break;}console.log(\"setting number\");setTicketNumber(_participantsTicket.toNumber());return _context2.abrupt(\"break\",95);case 90:console.log(\"setting -1 \");setTicketNumber(-1);case 92:i++;_context2.next=83;break;case 95:// Subscribe to accounts change\nprovider.on(\"accountsChanged\",function(accounts){walletConnect();});// Subscribe to chainId change\nprovider.on(\"chainChanged\",function(chainId){walletConnect();});case 97:case\"end\":return _context2.stop();}}},_callee2);}));return function walletConnect(){return _ref2.apply(this,arguments);};}();useEffect(function(){// connectWallet();\n// if(!window.WalletConnectProvider.connected){\n//   walletConnect()\n// }else{\n//   connectWallet()\n// }\nconsole.log(window.WalletConnectProvider.connected);console.log(\"connect executed\");// console.log(ticketNumber);\n// eslint-disable-next-line\n},[]);var approve=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:usdtContract.approve(BlockchainLotteryAddress,amount);case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function approve(){return _ref3.apply(this,arguments);};}();var depositeUSDT=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:blockchainLotteryContract.depositeUSDT(amount);case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function depositeUSDT(){return _ref4.apply(this,arguments);};}();var getLottery=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.t0=console;_context5.next=3;return blockchainLotteryContract.getLottery();case 3:_context5.t1=_context5.sent;_context5.t0.log.call(_context5.t0,_context5.t1);case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function getLottery(){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Navbar,{connectWallet:connectWallet,walletConnect:walletConnect,accounts:accounts,usdtBalance:usdtBalance,symbol:symbol}),/*#__PURE__*/_jsx(Main,{approve:approve,depositeUSDT:depositeUSDT,pricePool:pricePool,ticketNumber:ticketNumber,lastWinner:lastWinner,getLottery:getLottery,symbol:symbol,isOn:isOn}),networkErr?/*#__PURE__*/_jsx(\"h1\",{style:{textAlign:\"center\",color:\"red\"},children:networkErr}):null]});}export default App;","map":{"version":3,"names":["useState","useEffect","ethers","usdtabi","blockchainlottery","Navbar","Main","App","accounts","setAccounts","ticketNumber","setTicketNumber","pricePool","setPricePool","usdtBalance","setUsdtBalance","lastWinner","setLastWinner","isOn","setIsOn","usdtContract","setUsdtContract","blockchainLotteryContract","setBlockchainLotteryContract","networkErr","setNetworkErr","amount","setAmount","symbol","setSymbol","USDTAbi","abi","BlockchainLotteryAddress","BlockchainLotteryAbi","connectWallet","window","ethereum","request","method","chainId","console","log","_accounts","tempProvider","providers","Web3Provider","tempSigner","getSigner","tempBlockchainLotteryContract","Contract","tempAmount","USDTAddress","tempUSDTContract","decimals","tempdecimals","tempSymbol","balanceOf","tempPricePool","toNumber","getAddress","tempUSDTBalance","_lastWinner","_isOn","getAllParticipants","_participants","addressAndTickets","_participantsTicket","getAllTickets","alltickets","indexOf","i","length","on","walletConnect","WalletConnectProvider","provider","default","rpc","connected","enable","approve","depositeUSDT","getLottery","textAlign","color"],"sources":["/home/empiric-18/Desktop/Blockchain Lottery/front-end/src/App.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport { ethers } from \"ethers\";\nimport usdtabi from \"./build/USDT.json\";\nimport blockchainlottery from \"./build/BlockchainLottery.json\";\nimport Navbar from \"./Navbar\";\nimport Main from \"./Main\";\nfunction App() {\n  const [accounts, setAccounts] = useState(null);\n  const [ticketNumber, setTicketNumber] = useState(-1);\n  const [pricePool, setPricePool] = useState(null);\n  const [usdtBalance, setUsdtBalance] = useState(null);\n  const [lastWinner, setLastWinner] = useState(null);\n  const [isOn, setIsOn] = useState(null);\n  const [usdtContract, setUsdtContract] = useState(null);\n  const [blockchainLotteryContract, setBlockchainLotteryContract] =\n    useState(null);\n  const [networkErr, setNetworkErr] = useState(null);\n  const [amount, setAmount] = useState(null);\n  const [symbol, setSymbol] = useState(null);\n\n  // const [usdtAddress, setUsdtAddress] = useState(null)\n  // const USDTAddress = \"0x7FFB3d637014488b63fb9858E279385685AFc1e2\"; //Polygon Mainnet Address For USDT Tokens\n  // const USDTAddress = \"0xc1ef3d10d02F27Fe16052Aa463DB2C27a7604660\"; //Polygon Mumbai Address For USDT Tokens\n  const USDTAbi = usdtabi.abi;\n  // const BlockchainLotteryAddress = \"0x903F507A8b2887492aBA0fcEcc654b9981e4Cb58\";\n  const BlockchainLotteryAddress = \"0xC330332351858518Ff61C7d4930780B0d260EDEe\";\n\n  const BlockchainLotteryAbi = blockchainlottery.abi;\n\n  const connectWallet = async () => {\n    if (window.ethereum) {\n      let chainId = await window.ethereum.request({ method: \"net_version\" });\n      console.log(chainId);\n      //matic mainnet chain id = 137\n      //matic testnet chain id = 80001\n      //eslint-disable-next-line\n      if (chainId != 80001) {\n        setNetworkErr(\"Please change network to polygon\");\n      } else {\n        setNetworkErr(null);\n      }\n      let _accounts = await window.ethereum.request({\n        method: \"eth_requestAccounts\",\n      });\n      setAccounts(_accounts);\n\n      const tempProvider = new ethers.providers.Web3Provider(window.ethereum);\n      const tempSigner = tempProvider.getSigner();\n      const tempBlockchainLotteryContract = new ethers.Contract(\n        BlockchainLotteryAddress,\n        BlockchainLotteryAbi,\n        tempSigner\n      );\n      setBlockchainLotteryContract(tempBlockchainLotteryContract);\n      let tempAmount = await tempBlockchainLotteryContract.amount();\n      setAmount(tempAmount);\n      const USDTAddress = await tempBlockchainLotteryContract.USDTAddress();\n      // setUsdtAddress(USDTAddress)\n      const tempUSDTContract = new ethers.Contract(\n        USDTAddress,\n        USDTAbi,\n        tempSigner\n      );\n      setUsdtContract(tempUSDTContract);\n\n      let tempdecimals = await tempUSDTContract.decimals();\n      // let tempdecimals = 6\n\n      let tempSymbol = await tempUSDTContract.symbol();\n      setSymbol(tempSymbol);\n\n      let tempPricePool = await tempUSDTContract.balanceOf(\n        BlockchainLotteryAddress\n      );\n      console.log(tempPricePool.toNumber() / 10 ** tempdecimals);\n      setPricePool(tempPricePool.toNumber() / 10 ** tempdecimals);\n\n      let tempUSDTBalance = await tempUSDTContract.balanceOf(\n        tempSigner.getAddress()\n      );\n      console.log(tempUSDTBalance.toNumber() / 10 ** tempdecimals);\n      setUsdtBalance(tempUSDTBalance.toNumber() / 10 ** tempdecimals);\n\n      console.log(tempBlockchainLotteryContract);\n      let _lastWinner = await tempBlockchainLotteryContract.lastWinner();\n      setLastWinner(_lastWinner.toNumber());\n\n      let _isOn = await tempBlockchainLotteryContract.isOn();\n      console.log(_isOn);\n      setIsOn(_isOn);\n      if (_isOn) {\n        setTicketNumber(-1);\n      } else {\n        let _participants =\n          await tempBlockchainLotteryContract.getAllParticipants();\n        console.log(_participants);\n\n        let _participantsTicket =\n          await tempBlockchainLotteryContract.addressAndTickets(\n            await tempSigner.getAddress()\n          );\n        let alltickets = await tempBlockchainLotteryContract.getAllTickets();\n        console.log(alltickets);\n\n        // eslint-disable-next-line\n        if (_participants.indexOf(await tempSigner.getAddress()) == -1) {\n          console.log(\"setting -1 due to no participants\");\n          setTicketNumber(-1);\n        } else {\n          for (var i = 0; i < alltickets.length; i++) {\n            // eslint-disable-next-line\n            if (alltickets[i].toNumber() == _participantsTicket) {\n              console.log(\"setting number\");\n              setTicketNumber(_participantsTicket.toNumber());\n              break;\n            } else {\n              console.log(\"setting -1 \");\n              setTicketNumber(-1);\n            }\n          }\n        }\n      }\n    } else {\n      setNetworkErr(\"Please install Metamask\");\n    }\n\n    window.ethereum.on(\"accountsChanged\", function (accounts) {\n      console.log(accounts)\n      connectWallet();\n    });\n\n    window.ethereum.on(\"networkChanged\", function (accounts) {\n      console.log(accounts)\n      connectWallet();\n    });\n  };\n\n  const walletConnect = async () => {\n    const WalletConnectProvider = window.WalletConnectProvider;\n    console.log(WalletConnectProvider);\n    var provider = new WalletConnectProvider.default({\n      rpc: {\n        1: \"https://cloudflare-eth.com/\", // https://ethereumnodes.com/\n        137: \"https://polygon-rpc.com/\", // https://docs.polygon.technology/docs/develop/network-details/network/\n        80001: \"https://matic-mumbai.chainstacklabs.com/\",\n        // 80001: \"https://polygon-mumbai.g.alchemy.com/v2/bjMe0YCNyiyfqspS91W1JtoPNzoLh19a\"\n        // ...\n      },\n      // bridge: 'https://bridge.walletconnect.org',\n    });\n    console.log(provider.connected);\n    await provider.enable();\n    const tempProvider = new ethers.providers.Web3Provider(provider);\n    const tempSigner = tempProvider.getSigner();\n    const tempBlockchainLotteryContract = new ethers.Contract(\n      BlockchainLotteryAddress,\n      BlockchainLotteryAbi,\n      tempSigner\n    );\n    setBlockchainLotteryContract(tempBlockchainLotteryContract);\n    let tempAmount = await tempBlockchainLotteryContract.amount();\n    setAmount(tempAmount);\n    const USDTAddress = await tempBlockchainLotteryContract.USDTAddress();\n    // setUsdtAddress(USDTAddress)\n    const tempUSDTContract = new ethers.Contract(\n      USDTAddress,\n      USDTAbi,\n      tempSigner\n    );\n    setUsdtContract(tempUSDTContract);\n    setAccounts([await tempSigner.getAddress()]);\n    let tempdecimals = await tempUSDTContract.decimals();\n    // let tempdecimals = 6\n\n    let tempSymbol = await tempUSDTContract.symbol();\n    setSymbol(tempSymbol);\n\n    let tempPricePool = await tempUSDTContract.balanceOf(\n      BlockchainLotteryAddress\n    );\n    console.log(tempPricePool.toNumber() / 10 ** tempdecimals);\n    setPricePool(tempPricePool.toNumber() / 10 ** tempdecimals);\n\n    let tempUSDTBalance = await tempUSDTContract.balanceOf(\n      tempSigner.getAddress()\n    );\n    console.log(tempUSDTBalance.toNumber() / 10 ** tempdecimals);\n    setUsdtBalance(tempUSDTBalance.toNumber() / 10 ** tempdecimals);\n\n    console.log(tempBlockchainLotteryContract);\n    let _lastWinner = await tempBlockchainLotteryContract.lastWinner();\n    setLastWinner(_lastWinner.toNumber());\n\n    let _isOn = await tempBlockchainLotteryContract.isOn();\n    console.log(_isOn);\n    setIsOn(_isOn);\n    if (_isOn) {\n      setTicketNumber(-1);\n    } else {\n      let _participants =\n        await tempBlockchainLotteryContract.getAllParticipants();\n      console.log(_participants);\n\n      let _participantsTicket =\n        await tempBlockchainLotteryContract.addressAndTickets(\n          await tempSigner.getAddress()\n        );\n      let alltickets = await tempBlockchainLotteryContract.getAllTickets();\n      console.log(alltickets);\n\n      // eslint-disable-next-line\n      if (_participants.indexOf(await tempSigner.getAddress()) == -1) {\n        console.log(\"setting -1 due to no participants\");\n        setTicketNumber(-1);\n      } else {\n        for (var i = 0; i < alltickets.length; i++) {\n          // eslint-disable-next-line\n          if (alltickets[i].toNumber() == _participantsTicket) {\n            console.log(\"setting number\");\n            setTicketNumber(_participantsTicket.toNumber());\n            break;\n          } else {\n            console.log(\"setting -1 \");\n            setTicketNumber(-1);\n          }\n        }\n      }\n    }\n\n    // Subscribe to accounts change\n    provider.on(\"accountsChanged\", (accounts) => {\n      walletConnect()\n    });\n\n    // Subscribe to chainId change\n    provider.on(\"chainChanged\", (chainId) => {\n      walletConnect()\n    });\n  };\n  useEffect(() => {\n    // connectWallet();\n    // if(!window.WalletConnectProvider.connected){\n    //   walletConnect()\n    // }else{\n    //   connectWallet()\n    // }\n    console.log(window.WalletConnectProvider.connected)\n    console.log(\"connect executed\");\n    // console.log(ticketNumber);\n    // eslint-disable-next-line\n  }, []);\n\n  const approve = async () => {\n    usdtContract.approve(BlockchainLotteryAddress, amount);\n  };\n  const depositeUSDT = async () => {\n    blockchainLotteryContract.depositeUSDT(amount);\n  };\n  const getLottery = async () => {\n    console.log(await blockchainLotteryContract.getLottery());\n  };\n\n  return (\n    <div className=\"App\">\n      <Navbar\n        connectWallet={connectWallet}\n        walletConnect={walletConnect}\n        accounts={accounts}\n        usdtBalance={usdtBalance}\n        symbol={symbol}\n      />\n      <Main\n        approve={approve}\n        depositeUSDT={depositeUSDT}\n        pricePool={pricePool}\n        ticketNumber={ticketNumber}\n        lastWinner={lastWinner}\n        getLottery={getLottery}\n        symbol={symbol}\n        isOn={isOn}\n      />\n      {networkErr ? (\n        <h1 style={{ textAlign: \"center\", color: \"red\" }}>{networkErr}</h1>\n      ) : null}\n      {/* <h1>Admin</h1>\n      <button onClick={setUsdtAddress}>Update USDT Address</button>\n      <button onClick={setFeeAccount}>set fee account</button>\n      <button onClick={getTime}>Get Time</button>\n      <button onClick={mint}>Mint Tokens</button>\n      <button onClick={getAllParticipants}>Get all participants</button>\n      <button onClick={setTimeDuration}>Set Time Duration</button>\n      <h1>User</h1>\n      <button onClick={connectWallet}>Connect Metamask</button>\n      <button onClick={approve}>Approve Tokens</button>\n      <button onClick={depositeUSDT}>Add money to lottery</button>\n      <button onClick={getLottery}>Get Lottery</button> \n      \n      #Lottery Contract Address (Mumbai Matic) \n      0xBDf8E38F99E60a839db7bf8CB779ECE832605bf2\n        \n      # Test Tether (Mumbai Matic)\n      0xc1ef3d10d02F27Fe16052Aa463DB2C27a7604660\n        \n      \n      */}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}