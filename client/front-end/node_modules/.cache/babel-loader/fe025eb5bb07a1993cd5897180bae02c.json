{"ast":null,"code":"import _regeneratorRuntime from\"/home/empiric-18/Desktop/Blockchain Lottery/front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/empiric-18/Desktop/Blockchain Lottery/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/empiric-18/Desktop/Blockchain Lottery/front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import\"./App.css\";import{ethers}from\"ethers\";import usdtabi from\"./build/USDT.json\";import blockchainlottery from\"./build/BlockchainLottery.json\";import Navbar from\"./Navbar\";import Main from\"./Main\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),isTron=_useState2[0],setIsTron=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),walletType=_useState4[0],setWalletType=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),accounts=_useState6[0],setAccounts=_useState6[1];var _useState7=useState(-1),_useState8=_slicedToArray(_useState7,2),ticketNumber=_useState8[0],setTicketNumber=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),pricePool=_useState10[0],setPricePool=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),usdtBalance=_useState12[0],setUsdtBalance=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),lastWinner=_useState14[0],setLastWinner=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),isOn=_useState16[0],setIsOn=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),usdtContract=_useState18[0],setUsdtContract=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),BlockchainLotteryAddress=_useState20[0],setBlockchainLotteryAddress=_useState20[1];var _useState21=useState(null),_useState22=_slicedToArray(_useState21,2),blockchainLotteryContract=_useState22[0],setBlockchainLotteryContract=_useState22[1];var _useState23=useState(null),_useState24=_slicedToArray(_useState23,2),networkErr=_useState24[0],setNetworkErr=_useState24[1];var _useState25=useState(null),_useState26=_slicedToArray(_useState25,2),amount=_useState26[0],setAmount=_useState26[1];var _useState27=useState(null),_useState28=_slicedToArray(_useState27,2),symbol=_useState28[0],setSymbol=_useState28[1];// const [usdtAddress, setUsdtAddress] = useState(null)\n// const USDTAddress = \"0x7FFB3d637014488b63fb9858E279385685AFc1e2\"; //Polygon Mainnet Address For USDT Tokens\n// const USDTAddress = \"0xc1ef3d10d02F27Fe16052Aa463DB2C27a7604660\"; //Polygon Mumbai Address For USDT Tokens\nvar USDTAbi=usdtabi.abi;// const BlockchainLotteryAddress = \"0x903F507A8b2887492aBA0fcEcc654b9981e4Cb58\"; //mumbai\n// const BlockchainLotteryAddress = \"0xC330332351858518Ff61C7d4930780B0d260EDEe\";\n// const BlockchainLotteryAddress = \"0xA9cEa9cD7DB5BB46B636296B008C913047a75E34\"// bnb testnet\nvar BlockchainLotteryAbi=blockchainlottery.abi;var tronWebConnect=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _BlockchainLotteryAddress,tempBlockchainLotteryContract,_tempUsdtAddress,tempUsdtAddress,tempUSDTContract,tempdecimals,tempSymbol,tempPricePool,tempUSDTBalance,_lastWinner,_isOn,_participants,_participantsTicket,alltickets,i;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!window.tronWeb){_context.next=84;break;}setWalletType(\"TRON\");setAccounts([window.tronWeb.defaultAddress.base58]);_BlockchainLotteryAddress=\"TUWmgMu4PWCCiLDFQ6gmAFVRBjZQywKfrD\";setBlockchainLotteryAddress(_BlockchainLotteryAddress);_context.next=7;return window.tronWeb.contract(blockchainlottery.abi).at(_BlockchainLotteryAddress);case 7:tempBlockchainLotteryContract=_context.sent;console.log(tempBlockchainLotteryContract);setBlockchainLotteryContract(tempBlockchainLotteryContract);_context.t0=setAmount;_context.next=13;return tempBlockchainLotteryContract.amount().call();case 13:_context.t1=_context.sent.toNumber();(0,_context.t0)(_context.t1);setIsTron(true);_context.next=18;return tempBlockchainLotteryContract.USDTAddress().call();case 18:_tempUsdtAddress=_context.sent;tempUsdtAddress=window.tronWeb.address.fromHex(_tempUsdtAddress);_context.next=22;return window.tronWeb.contract(usdtabi.abi).at(tempUsdtAddress);case 22:tempUSDTContract=_context.sent;setUsdtContract(tempUSDTContract);_context.next=26;return tempUSDTContract.decimals().call();case 26:tempdecimals=_context.sent;_context.next=29;return tempUSDTContract.symbol().call();case 29:tempSymbol=_context.sent;setSymbol(tempSymbol);_context.next=33;return tempUSDTContract.balanceOf(_BlockchainLotteryAddress).call();case 33:tempPricePool=_context.sent;console.log(tempPricePool.toNumber()/Math.pow(10,tempdecimals));setPricePool(tempPricePool.toNumber()/Math.pow(10,tempdecimals));_context.next=38;return tempUSDTContract.balanceOf(window.tronWeb.defaultAddress.base58).call();case 38:tempUSDTBalance=_context.sent;console.log(tempUSDTBalance.toNumber()/Math.pow(10,tempdecimals));setUsdtBalance(tempUSDTBalance.toNumber()/Math.pow(10,tempdecimals));console.log(tempBlockchainLotteryContract);_context.next=44;return tempBlockchainLotteryContract.lastWinner().call();case 44:_lastWinner=_context.sent;setLastWinner(_lastWinner.toNumber());_context.next=48;return tempBlockchainLotteryContract.isOn().call();case 48:_isOn=_context.sent;console.log(_isOn);setIsOn(_isOn);if(!_isOn){_context.next=55;break;}setTicketNumber(-1);_context.next=84;break;case 55:_context.next=57;return tempBlockchainLotteryContract.getAllParticipants().call();case 57:_participants=_context.sent;console.log(_participants);_context.next=61;return tempBlockchainLotteryContract.addressAndTickets(window.tronWeb.defaultAddress.base58).call();case 61:_participantsTicket=_context.sent;_context.next=64;return tempBlockchainLotteryContract.getAllTickets().call();case 64:alltickets=_context.sent;console.log(alltickets);// eslint-disable-next-line\nif(!(_participants.indexOf(window.tronWeb.defaultAddress.hex)==-1)){_context.next=71;break;}console.log(\"setting -1 due to no participants\");setTicketNumber(-1);_context.next=84;break;case 71:i=0;case 72:if(!(i<alltickets.length)){_context.next=84;break;}if(!(alltickets[i].toNumber()==_participantsTicket)){_context.next=79;break;}console.log(\"setting number\");setTicketNumber(_participantsTicket.toNumber());return _context.abrupt(\"break\",84);case 79:console.log(\"setting -1 \");setTicketNumber(-1);case 81:i++;_context.next=72;break;case 84:case\"end\":return _context.stop();}}},_callee);}));return function tronWebConnect(){return _ref.apply(this,arguments);};}();var connectWallet=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _BlockchainLotteryAddress,chainId,_accounts,tempProvider,tempSigner,tempBlockchainLotteryContract,tempAmount,USDTAddress,tempUSDTContract,tempdecimals,tempSymbol,tempPricePool,tempUSDTBalance,_lastWinner,_isOn,_participants,_participantsTicket,alltickets,i,details,regexp,isMobileDevice;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!window.ethereum){_context2.next=97;break;}setWalletType(\"METAMASK\");_context2.next=4;return window.ethereum.request({method:\"net_version\"});case 4:chainId=_context2.sent;console.log(chainId);//matic mainnet chain id = 137\n//matic testnet chain id = 80001\n//BNB Mainnet chain id = 56\n//BNB testnet chain id = 97\n//rinkeby testnet chain id = 4\n//eslint-disable-next-line\nif(chainId==137){_BlockchainLotteryAddress=\"0x903F507A8b2887492aBA0fcEcc654b9981e4Cb58\";setBlockchainLotteryAddress(\"0x903F507A8b2887492aBA0fcEcc654b9981e4Cb58\");setNetworkErr(null);// eslint-disable-next-line\n}else if(chainId==56){_BlockchainLotteryAddress=\"0x903F507A8b2887492aBA0fcEcc654b9981e4Cb58\";setBlockchainLotteryAddress(\"0x903F507A8b2887492aBA0fcEcc654b9981e4Cb58\");setNetworkErr(null);}else{setNetworkErr(\"Change network to Polygon or BNB\");}_context2.next=9;return window.ethereum.request({method:\"eth_requestAccounts\"});case 9:_accounts=_context2.sent;setAccounts(_accounts);tempProvider=new ethers.providers.Web3Provider(window.ethereum);tempSigner=tempProvider.getSigner();tempBlockchainLotteryContract=new ethers.Contract(_BlockchainLotteryAddress,BlockchainLotteryAbi,tempSigner);setBlockchainLotteryContract(tempBlockchainLotteryContract);_context2.next=17;return tempBlockchainLotteryContract.amount();case 17:tempAmount=_context2.sent;setAmount(tempAmount);_context2.next=21;return tempBlockchainLotteryContract.USDTAddress();case 21:USDTAddress=_context2.sent;// setUsdtAddress(USDTAddress)\ntempUSDTContract=new ethers.Contract(USDTAddress,USDTAbi,tempSigner);setUsdtContract(tempUSDTContract);_context2.next=26;return tempUSDTContract.decimals();case 26:tempdecimals=_context2.sent;_context2.next=29;return tempUSDTContract.symbol();case 29:tempSymbol=_context2.sent;setSymbol(tempSymbol);_context2.next=33;return tempUSDTContract.balanceOf(_BlockchainLotteryAddress);case 33:tempPricePool=_context2.sent;console.log(tempPricePool.toNumber()/Math.pow(10,tempdecimals));setPricePool(tempPricePool.toNumber()/Math.pow(10,tempdecimals));_context2.next=38;return tempUSDTContract.balanceOf(tempSigner.getAddress());case 38:tempUSDTBalance=_context2.sent;console.log(tempUSDTBalance.toNumber()/Math.pow(10,tempdecimals));setUsdtBalance(tempUSDTBalance.toNumber()/Math.pow(10,tempdecimals));console.log(tempBlockchainLotteryContract);_context2.next=44;return tempBlockchainLotteryContract.lastWinner();case 44:_lastWinner=_context2.sent;setLastWinner(_lastWinner.toNumber());_context2.next=48;return tempBlockchainLotteryContract.isOn();case 48:_isOn=_context2.sent;console.log(_isOn);setIsOn(_isOn);if(!_isOn){_context2.next=55;break;}setTicketNumber(-1);_context2.next=94;break;case 55:_context2.next=57;return tempBlockchainLotteryContract.getAllParticipants();case 57:_participants=_context2.sent;console.log(_participants);_context2.t0=tempBlockchainLotteryContract;_context2.next=62;return tempSigner.getAddress();case 62:_context2.t1=_context2.sent;_context2.next=65;return _context2.t0.addressAndTickets.call(_context2.t0,_context2.t1);case 65:_participantsTicket=_context2.sent;_context2.next=68;return tempBlockchainLotteryContract.getAllTickets();case 68:alltickets=_context2.sent;console.log(alltickets);// eslint-disable-next-line\n_context2.t2=_participants;_context2.next=73;return tempSigner.getAddress();case 73:_context2.t3=_context2.sent;_context2.t4=_context2.t2.indexOf.call(_context2.t2,_context2.t3);_context2.t5=-1;if(!(_context2.t4==_context2.t5)){_context2.next=81;break;}console.log(\"setting -1 due to no participants\");setTicketNumber(-1);_context2.next=94;break;case 81:i=0;case 82:if(!(i<alltickets.length)){_context2.next=94;break;}if(!(alltickets[i].toNumber()==_participantsTicket)){_context2.next=89;break;}console.log(\"setting number\");setTicketNumber(_participantsTicket.toNumber());return _context2.abrupt(\"break\",94);case 89:console.log(\"setting -1 \");setTicketNumber(-1);case 91:i++;_context2.next=82;break;case 94:console.log(window.location);_context2.next=101;break;case 97:details=navigator.userAgent;regexp=/android|iphone|kindle|ipad/i;isMobileDevice=regexp.test(details);if(isMobileDevice){// window.location.href = \"metamask://dapp/opensea.io\";\n// window.location.href = \"https://metamask.app.link/dapp/opensea.io\";\nwindow.location.href=\"dapp://diablo.bet\";// window.location.href = \"dapp://\"+window.location.host;\n}else{setNetworkErr(\"Please install Metamask\");}case 101:window.ethereum.on(\"accountsChanged\",function(accounts){console.log(accounts);connectWallet();});window.ethereum.on(\"chainChanged\",function(accounts){console.log(accounts);connectWallet();});case 103:case\"end\":return _context2.stop();}}},_callee2);}));return function connectWallet(){return _ref2.apply(this,arguments);};}();var walletConnect=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var WalletConnectProvider,provider,tempProvider,_tempProvider$getNetw,chainId,_BlockchainLotteryAddress,tempSigner,tempBlockchainLotteryContract,tempAmount,USDTAddress,tempUSDTContract,tempdecimals,tempSymbol,tempPricePool,tempUSDTBalance,_lastWinner,_isOn,_participants,_participantsTicket,alltickets,i;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:WalletConnectProvider=window.WalletConnectProvider;console.log(WalletConnectProvider);provider=new WalletConnectProvider.default({rpc:{1:\"https://cloudflare-eth.com/\",// https://ethereumnodes.com/\n137:\"https://polygon-rpc.com/\",// https://docs.polygon.technology/docs/develop/network-details/network/\n80001:\"https://matic-mumbai.chainstacklabs.com/\",// 80001: \"https://polygon-mumbai.g.alchemy.com/v2/bjMe0YCNyiyfqspS91W1JtoPNzoLh19a\"\n// ...\n56:\"https://bsc-dataseed.binance.org/\"}// bridge: 'https://bridge.walletconnect.org',\n});setWalletType(\"WALLETCONNECT\");console.log(provider.connected);_context3.next=7;return provider.enable();case 7:tempProvider=new ethers.providers.Web3Provider(provider);_tempProvider$getNetw=tempProvider.getNetwork(),chainId=_tempProvider$getNetw.chainId;console.log(\"chain id from Wallet Connect\"+chainId);// eslint-disable-next-line\nif(chainId==137){// Polygon\n_BlockchainLotteryAddress=\"0x903F507A8b2887492aBA0fcEcc654b9981e4Cb58\";setBlockchainLotteryAddress(\"0x903F507A8b2887492aBA0fcEcc654b9981e4Cb58\");setNetworkErr(null);// eslint-disable-next-line\n}else if(chainId==56){// BNB\n_BlockchainLotteryAddress=\"0x903F507A8b2887492aBA0fcEcc654b9981e4Cb58\";setBlockchainLotteryAddress(\"0x903F507A8b2887492aBA0fcEcc654b9981e4Cb58\");setNetworkErr(null);// eslint-disable-next-line\n}else if(chainId==43113){// avalanche\n_BlockchainLotteryAddress=\"0xA9cEa9cD7DB5BB46B636296B008C913047a75E34\";setBlockchainLotteryAddress(\"0xA9cEa9cD7DB5BB46B636296B008C913047a75E34\");setNetworkErr(null);}else{setNetworkErr(\"Change network to Polygon or BNB\");}tempSigner=tempProvider.getSigner();tempBlockchainLotteryContract=new ethers.Contract(_BlockchainLotteryAddress,BlockchainLotteryAbi,tempSigner);setBlockchainLotteryContract(tempBlockchainLotteryContract);_context3.next=16;return tempBlockchainLotteryContract.amount();case 16:tempAmount=_context3.sent;setAmount(tempAmount);_context3.next=20;return tempBlockchainLotteryContract.USDTAddress();case 20:USDTAddress=_context3.sent;// setUsdtAddress(USDTAddress)\ntempUSDTContract=new ethers.Contract(USDTAddress,USDTAbi,tempSigner);setUsdtContract(tempUSDTContract);_context3.t0=setAccounts;_context3.next=26;return tempSigner.getAddress();case 26:_context3.t1=_context3.sent;_context3.t2=[_context3.t1];(0,_context3.t0)(_context3.t2);_context3.next=31;return tempUSDTContract.decimals();case 31:tempdecimals=_context3.sent;_context3.next=34;return tempUSDTContract.symbol();case 34:tempSymbol=_context3.sent;setSymbol(tempSymbol);_context3.next=38;return tempUSDTContract.balanceOf(_BlockchainLotteryAddress);case 38:tempPricePool=_context3.sent;console.log(tempPricePool.toNumber()/Math.pow(10,tempdecimals));setPricePool(tempPricePool.toNumber()/Math.pow(10,tempdecimals));_context3.next=43;return tempUSDTContract.balanceOf(tempSigner.getAddress());case 43:tempUSDTBalance=_context3.sent;console.log(tempUSDTBalance.toNumber()/Math.pow(10,tempdecimals));setUsdtBalance(tempUSDTBalance.toNumber()/Math.pow(10,tempdecimals));console.log(tempBlockchainLotteryContract);_context3.next=49;return tempBlockchainLotteryContract.lastWinner();case 49:_lastWinner=_context3.sent;setLastWinner(_lastWinner.toNumber());_context3.next=53;return tempBlockchainLotteryContract.isOn();case 53:_isOn=_context3.sent;console.log(_isOn);setIsOn(_isOn);if(!_isOn){_context3.next=60;break;}setTicketNumber(-1);_context3.next=99;break;case 60:_context3.next=62;return tempBlockchainLotteryContract.getAllParticipants();case 62:_participants=_context3.sent;console.log(_participants);_context3.t3=tempBlockchainLotteryContract;_context3.next=67;return tempSigner.getAddress();case 67:_context3.t4=_context3.sent;_context3.next=70;return _context3.t3.addressAndTickets.call(_context3.t3,_context3.t4);case 70:_participantsTicket=_context3.sent;_context3.next=73;return tempBlockchainLotteryContract.getAllTickets();case 73:alltickets=_context3.sent;console.log(alltickets);// eslint-disable-next-line\n_context3.t5=_participants;_context3.next=78;return tempSigner.getAddress();case 78:_context3.t6=_context3.sent;_context3.t7=_context3.t5.indexOf.call(_context3.t5,_context3.t6);_context3.t8=-1;if(!(_context3.t7==_context3.t8)){_context3.next=86;break;}console.log(\"setting -1 due to no participants\");setTicketNumber(-1);_context3.next=99;break;case 86:i=0;case 87:if(!(i<alltickets.length)){_context3.next=99;break;}if(!(alltickets[i].toNumber()==_participantsTicket)){_context3.next=94;break;}console.log(\"setting number\");setTicketNumber(_participantsTicket.toNumber());return _context3.abrupt(\"break\",99);case 94:console.log(\"setting -1 \");setTicketNumber(-1);case 96:i++;_context3.next=87;break;case 99:// Subscribe to accounts change\nprovider.on(\"accountsChanged\",function(accounts){walletConnect();});// Subscribe to chainId change\nprovider.on(\"chainChanged\",function(chainId){walletConnect();});case 101:case\"end\":return _context3.stop();}}},_callee3);}));return function walletConnect(){return _ref3.apply(this,arguments);};}();useEffect(function(){// connectWallet();\n// if(!window.WalletConnectProvider.connected){\n//   walletConnect()\n// }else{\n//   connectWallet()\n// }\nconsole.log(window.WalletConnectProvider.connected);console.log(\"connect executed\");// console.log(ticketNumber);\n// eslint-disable-next-line\n},[]);var approve=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var tx;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log(BlockchainLotteryAddress);if(!isTron){_context4.next=5;break;}usdtContract.approve(BlockchainLotteryAddress,amount).send();_context4.next=11;break;case 5:_context4.next=7;return usdtContract.approve(BlockchainLotteryAddress,amount);case 7:tx=_context4.sent;_context4.next=10;return tx.wait();case 10:alert(\"TOKENS APPROVED\");case 11:case\"end\":return _context4.stop();}}},_callee4);}));return function approve(){return _ref4.apply(this,arguments);};}();var depositeUSDT=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){var tx;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!isTron){_context5.next=4;break;}blockchainLotteryContract.depositeUSDT(amount).send();_context5.next=11;break;case 4:_context5.next=6;return blockchainLotteryContract.depositeUSDT(amount);case 6:tx=_context5.sent;_context5.next=9;return tx.wait();case 9:if(walletType===\"METAMASK\"){connectWallet();}else if(walletType===\"WALLETCONNECT\"){walletConnect();}alert(\"TOKENS DEPOSITED\");case 11:case\"end\":return _context5.stop();}}},_callee5);}));return function depositeUSDT(){return _ref5.apply(this,arguments);};}();var getLottery=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(){return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.t0=console;_context6.next=3;return blockchainLotteryContract.getLottery();case 3:_context6.t1=_context6.sent;_context6.t0.log.call(_context6.t0,_context6.t1);case 5:case\"end\":return _context6.stop();}}},_callee6);}));return function getLottery(){return _ref6.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Navbar,{connectWallet:connectWallet,walletConnect:walletConnect,tronWebConnect:tronWebConnect,accounts:accounts,usdtBalance:usdtBalance,symbol:symbol}),/*#__PURE__*/_jsx(Main,{approve:approve,depositeUSDT:depositeUSDT,pricePool:pricePool,ticketNumber:ticketNumber,lastWinner:lastWinner,getLottery:getLottery,symbol:symbol,isOn:isOn}),networkErr?/*#__PURE__*/_jsx(\"h1\",{style:{textAlign:\"center\",color:\"red\"},children:networkErr}):null]});}export default App;","map":{"version":3,"names":["useState","useEffect","ethers","usdtabi","blockchainlottery","Navbar","Main","App","isTron","setIsTron","walletType","setWalletType","accounts","setAccounts","ticketNumber","setTicketNumber","pricePool","setPricePool","usdtBalance","setUsdtBalance","lastWinner","setLastWinner","isOn","setIsOn","usdtContract","setUsdtContract","BlockchainLotteryAddress","setBlockchainLotteryAddress","blockchainLotteryContract","setBlockchainLotteryContract","networkErr","setNetworkErr","amount","setAmount","symbol","setSymbol","USDTAbi","abi","BlockchainLotteryAbi","tronWebConnect","window","tronWeb","defaultAddress","base58","_BlockchainLotteryAddress","contract","at","tempBlockchainLotteryContract","console","log","call","toNumber","USDTAddress","_tempUsdtAddress","tempUsdtAddress","address","fromHex","tempUSDTContract","decimals","tempdecimals","tempSymbol","balanceOf","tempPricePool","tempUSDTBalance","_lastWinner","_isOn","getAllParticipants","_participants","addressAndTickets","_participantsTicket","getAllTickets","alltickets","indexOf","hex","i","length","connectWallet","ethereum","request","method","chainId","_accounts","tempProvider","providers","Web3Provider","tempSigner","getSigner","Contract","tempAmount","getAddress","location","details","navigator","userAgent","regexp","isMobileDevice","test","href","on","walletConnect","WalletConnectProvider","provider","default","rpc","connected","enable","getNetwork","approve","send","tx","wait","alert","depositeUSDT","getLottery","textAlign","color"],"sources":["/home/empiric-18/Desktop/Blockchain Lottery/front-end/src/App.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport { ethers } from \"ethers\";\nimport usdtabi from \"./build/USDT.json\";\nimport blockchainlottery from \"./build/BlockchainLottery.json\";\nimport Navbar from \"./Navbar\";\nimport Main from \"./Main\";\nfunction App() {\n  const [isTron, setIsTron] = useState(null);\n  const [walletType, setWalletType] = useState(null)\n  const [accounts, setAccounts] = useState(null);\n  const [ticketNumber, setTicketNumber] = useState(-1);\n  const [pricePool, setPricePool] = useState(null);\n  const [usdtBalance, setUsdtBalance] = useState(null);\n  const [lastWinner, setLastWinner] = useState(null);\n  const [isOn, setIsOn] = useState(null);\n  const [usdtContract, setUsdtContract] = useState(null);\n  const [BlockchainLotteryAddress, setBlockchainLotteryAddress] =\n    useState(null);\n  const [blockchainLotteryContract, setBlockchainLotteryContract] =\n    useState(null);\n  const [networkErr, setNetworkErr] = useState(null);\n  const [amount, setAmount] = useState(null);\n  const [symbol, setSymbol] = useState(null);\n\n  // const [usdtAddress, setUsdtAddress] = useState(null)\n  // const USDTAddress = \"0x7FFB3d637014488b63fb9858E279385685AFc1e2\"; //Polygon Mainnet Address For USDT Tokens\n  // const USDTAddress = \"0xc1ef3d10d02F27Fe16052Aa463DB2C27a7604660\"; //Polygon Mumbai Address For USDT Tokens\n  const USDTAbi = usdtabi.abi;\n\n  // const BlockchainLotteryAddress = \"0x903F507A8b2887492aBA0fcEcc654b9981e4Cb58\"; //mumbai\n  // const BlockchainLotteryAddress = \"0xC330332351858518Ff61C7d4930780B0d260EDEe\";\n  // const BlockchainLotteryAddress = \"0xA9cEa9cD7DB5BB46B636296B008C913047a75E34\"// bnb testnet\n  const BlockchainLotteryAbi = blockchainlottery.abi;\n  const tronWebConnect = async () => {\n    if (window.tronWeb) {\n      setWalletType(\"TRON\")\n      setAccounts([window.tronWeb.defaultAddress.base58]);\n      let _BlockchainLotteryAddress = \"TUWmgMu4PWCCiLDFQ6gmAFVRBjZQywKfrD\";\n      setBlockchainLotteryAddress(_BlockchainLotteryAddress);\n      const tempBlockchainLotteryContract = await window.tronWeb\n        .contract(blockchainlottery.abi)\n        .at(_BlockchainLotteryAddress);\n      console.log(tempBlockchainLotteryContract);\n      setBlockchainLotteryContract(tempBlockchainLotteryContract);\n      setAmount(\n        (await tempBlockchainLotteryContract.amount().call()).toNumber()\n      );\n      setIsTron(true);\n      let _tempUsdtAddress = await tempBlockchainLotteryContract\n        .USDTAddress()\n        .call();\n      let tempUsdtAddress = window.tronWeb.address.fromHex(_tempUsdtAddress);\n      const tempUSDTContract = await window.tronWeb\n        .contract(usdtabi.abi)\n        .at(tempUsdtAddress);\n      setUsdtContract(tempUSDTContract);\n\n      let tempdecimals = await tempUSDTContract.decimals().call();\n      // let tempdecimals = 6\n\n      let tempSymbol = await tempUSDTContract.symbol().call();\n      setSymbol(tempSymbol);\n\n      let tempPricePool = await tempUSDTContract.balanceOf(\n        _BlockchainLotteryAddress\n      ).call();\n      console.log(tempPricePool.toNumber() / 10 ** tempdecimals);\n      setPricePool(tempPricePool.toNumber() / 10 ** tempdecimals);\n\n      let tempUSDTBalance = await tempUSDTContract.balanceOf(\n        window.tronWeb.defaultAddress.base58\n      ).call();\n      console.log(tempUSDTBalance.toNumber() / 10 ** tempdecimals);\n      setUsdtBalance(tempUSDTBalance.toNumber() / 10 ** tempdecimals);\n\n      console.log(tempBlockchainLotteryContract);\n      let _lastWinner = await tempBlockchainLotteryContract.lastWinner().call();\n      setLastWinner(_lastWinner.toNumber());\n\n      let _isOn = await tempBlockchainLotteryContract.isOn().call();\n      console.log(_isOn);\n      setIsOn(_isOn);\n      if (_isOn) {\n        setTicketNumber(-1);\n      } else {\n        let _participants =\n          await tempBlockchainLotteryContract.getAllParticipants().call();\n        console.log(_participants);\n\n        let _participantsTicket =\n          await tempBlockchainLotteryContract.addressAndTickets(\n            window.tronWeb.defaultAddress.base58\n          ).call();\n        let alltickets = await tempBlockchainLotteryContract.getAllTickets().call();\n        console.log(alltickets);\n\n        // eslint-disable-next-line\n        if (_participants.indexOf(window.tronWeb.defaultAddress.hex) == -1) {\n          console.log(\"setting -1 due to no participants\");\n          setTicketNumber(-1);\n        } else {\n          for (var i = 0; i < alltickets.length; i++) {\n            // eslint-disable-next-line\n            if (alltickets[i].toNumber() == _participantsTicket) {\n              console.log(\"setting number\");\n              setTicketNumber(_participantsTicket.toNumber());\n              break;\n            } else {\n              console.log(\"setting -1 \");\n              setTicketNumber(-1);\n            }\n          }\n        }\n      }\n    }\n  };\n\n  const connectWallet = async () => {\n    if (window.ethereum) {\n      setWalletType(\"METAMASK\")\n      let _BlockchainLotteryAddress;\n      let chainId = await window.ethereum.request({ method: \"net_version\" });\n      console.log(chainId);\n      //matic mainnet chain id = 137\n      //matic testnet chain id = 80001\n      //BNB Mainnet chain id = 56\n      //BNB testnet chain id = 97\n      //rinkeby testnet chain id = 4\n      //eslint-disable-next-line\n      if (chainId == 137) {\n        _BlockchainLotteryAddress =\n          \"0x903F507A8b2887492aBA0fcEcc654b9981e4Cb58\";\n        setBlockchainLotteryAddress(\n          \"0x903F507A8b2887492aBA0fcEcc654b9981e4Cb58\"\n        );\n        setNetworkErr(null);\n        // eslint-disable-next-line\n      } else if (chainId == 56) {\n        _BlockchainLotteryAddress =\n          \"0x903F507A8b2887492aBA0fcEcc654b9981e4Cb58\";\n        setBlockchainLotteryAddress(\n          \"0x903F507A8b2887492aBA0fcEcc654b9981e4Cb58\"\n        );\n        setNetworkErr(null);\n      } else {\n        setNetworkErr(\"Change network to Polygon or BNB\");\n      }\n\n      let _accounts = await window.ethereum.request({\n        method: \"eth_requestAccounts\",\n      });\n      setAccounts(_accounts);\n\n      const tempProvider = new ethers.providers.Web3Provider(window.ethereum);\n      const tempSigner = tempProvider.getSigner();\n      const tempBlockchainLotteryContract = new ethers.Contract(\n        _BlockchainLotteryAddress,\n        BlockchainLotteryAbi,\n        tempSigner\n      );\n      setBlockchainLotteryContract(tempBlockchainLotteryContract);\n      let tempAmount = await tempBlockchainLotteryContract.amount();\n      setAmount(tempAmount);\n      const USDTAddress = await tempBlockchainLotteryContract.USDTAddress();\n      // setUsdtAddress(USDTAddress)\n      const tempUSDTContract = new ethers.Contract(\n        USDTAddress,\n        USDTAbi,\n        tempSigner\n      );\n      setUsdtContract(tempUSDTContract);\n\n      let tempdecimals = await tempUSDTContract.decimals();\n      // let tempdecimals = 6\n\n      let tempSymbol = await tempUSDTContract.symbol();\n      setSymbol(tempSymbol);\n\n      let tempPricePool = await tempUSDTContract.balanceOf(\n        _BlockchainLotteryAddress\n      );\n      console.log(tempPricePool.toNumber() / 10 ** tempdecimals);\n      setPricePool(tempPricePool.toNumber() / 10 ** tempdecimals);\n\n      let tempUSDTBalance = await tempUSDTContract.balanceOf(\n        tempSigner.getAddress()\n      );\n      console.log(tempUSDTBalance.toNumber() / 10 ** tempdecimals);\n      setUsdtBalance(tempUSDTBalance.toNumber() / 10 ** tempdecimals);\n\n      console.log(tempBlockchainLotteryContract);\n      let _lastWinner = await tempBlockchainLotteryContract.lastWinner();\n      setLastWinner(_lastWinner.toNumber());\n\n      let _isOn = await tempBlockchainLotteryContract.isOn();\n      console.log(_isOn);\n      setIsOn(_isOn);\n      if (_isOn) {\n        setTicketNumber(-1);\n      } else {\n        let _participants =\n          await tempBlockchainLotteryContract.getAllParticipants();\n        console.log(_participants);\n\n        let _participantsTicket =\n          await tempBlockchainLotteryContract.addressAndTickets(\n            await tempSigner.getAddress()\n          );\n        let alltickets = await tempBlockchainLotteryContract.getAllTickets();\n        console.log(alltickets);\n\n        // eslint-disable-next-line\n        if (_participants.indexOf(await tempSigner.getAddress()) == -1) {\n          console.log(\"setting -1 due to no participants\");\n          setTicketNumber(-1);\n        } else {\n          for (var i = 0; i < alltickets.length; i++) {\n            // eslint-disable-next-line\n            if (alltickets[i].toNumber() == _participantsTicket) {\n              console.log(\"setting number\");\n              setTicketNumber(_participantsTicket.toNumber());\n              break;\n            } else {\n              console.log(\"setting -1 \");\n              setTicketNumber(-1);\n            }\n          }\n        }\n      }\n      console.log(window.location)\n    } else {\n      let details = navigator.userAgent\n      let regexp = /android|iphone|kindle|ipad/i;\n      let isMobileDevice = regexp.test(details);\n      if (isMobileDevice) {\n        // window.location.href = \"metamask://dapp/opensea.io\";\n        // window.location.href = \"https://metamask.app.link/dapp/opensea.io\";\n        window.location.href = \"dapp://diablo.bet\";\n        // window.location.href = \"dapp://\"+window.location.host;\n\n\n         \n      } else {\n        setNetworkErr(\"Please install Metamask\");\n      }\n    }\n\n    window.ethereum.on(\"accountsChanged\", function (accounts) {\n      console.log(accounts);\n      connectWallet();\n    });\n\n    window.ethereum.on(\"chainChanged\", function (accounts) {\n      console.log(accounts);\n      connectWallet();\n    });\n  };\n\n  const walletConnect = async () => {\n    const WalletConnectProvider = window.WalletConnectProvider;\n    console.log(WalletConnectProvider);\n    var provider = new WalletConnectProvider.default({\n      rpc: {\n        1: \"https://cloudflare-eth.com/\", // https://ethereumnodes.com/\n        137: \"https://polygon-rpc.com/\", // https://docs.polygon.technology/docs/develop/network-details/network/\n        80001: \"https://matic-mumbai.chainstacklabs.com/\",\n        // 80001: \"https://polygon-mumbai.g.alchemy.com/v2/bjMe0YCNyiyfqspS91W1JtoPNzoLh19a\"\n        // ...\n        56:\"https://bsc-dataseed.binance.org/\"\n      },\n      // bridge: 'https://bridge.walletconnect.org',\n    });\n    setWalletType(\"WALLETCONNECT\")\n    console.log(provider.connected);\n    await provider.enable();\n    const tempProvider = new ethers.providers.Web3Provider(provider);\n    const { chainId } = tempProvider.getNetwork();\n    console.log(\"chain id from Wallet Connect\" + chainId);\n    let _BlockchainLotteryAddress;\n    // eslint-disable-next-line\n    if (chainId == 137) {\n      // Polygon\n      _BlockchainLotteryAddress = \"0x903F507A8b2887492aBA0fcEcc654b9981e4Cb58\";\n      setBlockchainLotteryAddress(\"0x903F507A8b2887492aBA0fcEcc654b9981e4Cb58\");\n      setNetworkErr(null);\n      // eslint-disable-next-line\n    } else if (chainId == 56) {\n      // BNB\n      _BlockchainLotteryAddress = \"0x903F507A8b2887492aBA0fcEcc654b9981e4Cb58\";\n      setBlockchainLotteryAddress(\"0x903F507A8b2887492aBA0fcEcc654b9981e4Cb58\");\n      setNetworkErr(null);\n      // eslint-disable-next-line\n    } else if (chainId == 43113) {\n      // avalanche\n      _BlockchainLotteryAddress = \"0xA9cEa9cD7DB5BB46B636296B008C913047a75E34\";\n      setBlockchainLotteryAddress(\"0xA9cEa9cD7DB5BB46B636296B008C913047a75E34\");\n      setNetworkErr(null);\n    } else {\n      setNetworkErr(\"Change network to Polygon or BNB\");\n    }\n\n    const tempSigner = tempProvider.getSigner();\n    const tempBlockchainLotteryContract = new ethers.Contract(\n      _BlockchainLotteryAddress,\n      BlockchainLotteryAbi,\n      tempSigner\n    );\n    setBlockchainLotteryContract(tempBlockchainLotteryContract);\n    let tempAmount = await tempBlockchainLotteryContract.amount();\n    setAmount(tempAmount);\n    const USDTAddress = await tempBlockchainLotteryContract.USDTAddress();\n    // setUsdtAddress(USDTAddress)\n    const tempUSDTContract = new ethers.Contract(\n      USDTAddress,\n      USDTAbi,\n      tempSigner\n    );\n    setUsdtContract(tempUSDTContract);\n    setAccounts([await tempSigner.getAddress()]);\n    let tempdecimals = await tempUSDTContract.decimals();\n    // let tempdecimals = 6\n\n    let tempSymbol = await tempUSDTContract.symbol();\n    setSymbol(tempSymbol);\n\n    let tempPricePool = await tempUSDTContract.balanceOf(\n      _BlockchainLotteryAddress\n    );\n    console.log(tempPricePool.toNumber() / 10 ** tempdecimals);\n    setPricePool(tempPricePool.toNumber() / 10 ** tempdecimals);\n\n    let tempUSDTBalance = await tempUSDTContract.balanceOf(\n      tempSigner.getAddress()\n    );\n    console.log(tempUSDTBalance.toNumber() / 10 ** tempdecimals);\n    setUsdtBalance(tempUSDTBalance.toNumber() / 10 ** tempdecimals);\n\n    console.log(tempBlockchainLotteryContract);\n    let _lastWinner = await tempBlockchainLotteryContract.lastWinner();\n    setLastWinner(_lastWinner.toNumber());\n\n    let _isOn = await tempBlockchainLotteryContract.isOn();\n    console.log(_isOn);\n    setIsOn(_isOn);\n    if (_isOn) {\n      setTicketNumber(-1);\n    } else {\n      let _participants =\n        await tempBlockchainLotteryContract.getAllParticipants();\n      console.log(_participants);\n\n      let _participantsTicket =\n        await tempBlockchainLotteryContract.addressAndTickets(\n          await tempSigner.getAddress()\n        );\n      let alltickets = await tempBlockchainLotteryContract.getAllTickets();\n      console.log(alltickets);\n\n      // eslint-disable-next-line\n      if (_participants.indexOf(await tempSigner.getAddress()) == -1) {\n        console.log(\"setting -1 due to no participants\");\n        setTicketNumber(-1);\n      } else {\n        for (var i = 0; i < alltickets.length; i++) {\n          // eslint-disable-next-line\n          if (alltickets[i].toNumber() == _participantsTicket) {\n            console.log(\"setting number\");\n            setTicketNumber(_participantsTicket.toNumber());\n            break;\n          } else {\n            console.log(\"setting -1 \");\n            setTicketNumber(-1);\n          }\n        }\n      }\n    }\n\n    // Subscribe to accounts change\n    provider.on(\"accountsChanged\", (accounts) => {\n      walletConnect();\n    });\n\n    // Subscribe to chainId change\n    provider.on(\"chainChanged\", (chainId) => {\n      walletConnect();\n    });\n  };\n\n  useEffect(() => {\n    // connectWallet();\n    // if(!window.WalletConnectProvider.connected){\n    //   walletConnect()\n    // }else{\n    //   connectWallet()\n    // }\n    console.log(window.WalletConnectProvider.connected);\n    console.log(\"connect executed\");\n    // console.log(ticketNumber);\n    // eslint-disable-next-line\n  }, []);\n\n  const approve = async () => {\n    console.log(BlockchainLotteryAddress);\n    if (isTron) {\n      usdtContract.approve(BlockchainLotteryAddress, amount).send();\n    } else {\n      const tx = await usdtContract.approve(BlockchainLotteryAddress, amount);\n      await tx.wait()\n      \n      alert(\"TOKENS APPROVED\")\n    }\n  };\n  const depositeUSDT = async () => {\n    if (isTron) {\n      blockchainLotteryContract.depositeUSDT(amount).send();\n    } else {\n      // eslint-disable-next-line\n      const tx = await blockchainLotteryContract.depositeUSDT(amount);\n      await tx.wait()\n      if(walletType===\"METAMASK\"){\n        connectWallet()\n      }else if(walletType===\"WALLETCONNECT\"){\n        walletConnect()\n      }\n      alert(\"TOKENS DEPOSITED\")\n    }\n  };\n  const getLottery = async () => {\n    console.log(await blockchainLotteryContract.getLottery());\n  };\n\n  return (\n    <div className=\"App\">\n      <Navbar\n        connectWallet={connectWallet}\n        walletConnect={walletConnect}\n        tronWebConnect={tronWebConnect}\n        accounts={accounts}\n        usdtBalance={usdtBalance}\n        symbol={symbol}\n      />\n      <Main\n        approve={approve}\n        depositeUSDT={depositeUSDT}\n        pricePool={pricePool}\n        ticketNumber={ticketNumber}\n        lastWinner={lastWinner}\n        getLottery={getLottery}\n        symbol={symbol}\n        isOn={isOn}\n      />\n      {networkErr ? (\n        <h1 style={{ textAlign: \"center\", color: \"red\" }}>{networkErr}</h1>\n      ) : null}\n      {/* <h1>Admin</h1>\n      <button onClick={setUsdtAddress}>Update USDT Address</button>\n      <button onClick={setFeeAccount}>set fee account</button>\n      <button onClick={getTime}>Get Time</button>\n      <button onClick={mint}>Mint Tokens</button>\n      <button onClick={getAllParticipants}>Get all participants</button>\n      <button onClick={setTimeDuration}>Set Time Duration</button>\n      <h1>User</h1>\n      <button onClick={connectWallet}>Connect Metamask</button>\n      <button onClick={approve}>Approve Tokens</button>\n      <button onClick={depositeUSDT}>Add money to lottery</button>\n      <button onClick={getLottery}>Get Lottery</button> \n      \n      #Lottery Contract Address (Mumbai Matic) \n      0xBDf8E38F99E60a839db7bf8CB779ECE832605bf2\n        \n      # Test Tether (Mumbai Matic)\n      0xc1ef3d10d02F27Fe16052Aa463DB2C27a7604660\n        \n      \n      */}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}